# AWE Electronics - Database Architecture

## System Architecture Diagram

```
???????????????????????????????????????????????????????????????????????
?                      AWE Electronics System                           ?
???????????????????????????????????????????????????????????????????????

?????????????????????
?   Desktop App     ?
?   (WinForms)      ?
?                   ?
?  • Sales          ?
?  • Inventory      ?
?  • Reports        ?
?????????????????????
         ?
         ? ADO.NET
         ????????????????????
         ?                  ?
?????????????????????  ????????????????????
?   Web App (MVC)   ?  ?  Business Logic  ?
?                   ?  ?      (BLL)       ?
?  • Product Cat.   ?  ?                  ?
?  • Orders         ?  ?  • UserBLL       ?
?  • Customers      ?  ?  • ProductBLL    ?
?????????????????????  ?  • OrderBLL      ?
         ?             ?  • CategoryBLL   ?
         ?             ????????????????????
         ?                  ?
         ????????????????????
                    ?
            ??????????????????
            ?  Data Access   ?
            ?     (DAL)      ?
            ?                ?
            ? • UserDAL      ?
            ? • ProductDAL   ?
            ? • OrderDAL     ?
            ? • CategoryDAL  ?
            ??????????????????
                    ?
                    ? Connection String
                    ? (DatabaseConfig.cs)
                    ?
        ????????????????????????????
        ?   SQL Server Container   ?
        ?   (Docker)               ?
        ?                          ?
        ?   localhost:1433         ?
        ?   sa / YourStrong@...    ?
        ?                          ?
        ?  ??????????????????????  ?
        ?  ? AWEElectronics_DB  ?  ?
        ?  ?                    ?  ?
        ?  ?  • Users           ?  ?
        ?  ?  • Categories      ?  ?
        ?  ?  • Products        ?  ?
        ?  ?  • Suppliers       ?  ?
        ?  ?  • Orders          ?  ?
        ?  ?  • OrderDetails    ?  ?
        ?  ?  • Payments        ?  ?
        ?  ?  • Inventory...    ?  ?
        ?  ??????????????????????  ?
        ????????????????????????????
```

## Database Schema Diagram

```
????????????????????????????????????????????????????????????????????????????
?                      AWEElectronics_DB Schema                              ?
????????????????????????????????????????????????????????????????????????????

???????????????????
?     Users       ?
???????????????????
? PK UserID       ?????
?    Username     ?   ?
?    PasswordHash ?   ?
?    FullName     ?   ?
?    Email        ?   ?
?    Role         ?   ?
?    Status       ?   ?
?    CreatedDate  ?   ?
???????????????????   ?
                      ? FK
???????????????????   ?
?  Categories     ?   ?
???????????????????   ?
? PK CategoryID   ??? ?
?    Name         ? ? ?
? FK ParentCatID  ??? ? (Self-referencing)
?    Slug         ?   ?
???????????????????   ?
         ?            ?
         ? FK         ?
         ?            ?
???????????????????   ?
?   Products      ?   ?
???????????????????   ?
? PK ProductID    ??? ?
? FK CategoryID   ? ? ?
? FK SupplierID   ? ? ?
?    SKU          ? ? ?
?    Name         ? ? ?
?    Specifs.     ? ? ?
?    Price        ? ? ?
?    StockLevel   ? ? ?
?    IsPublished  ? ? ?
??????????????????? ? ?
         ?          ? ?
         ?          ? ?
         ? FK       ? ?
?????????????????  ? ?
? OrderDetails  ?  ? ?
?????????????????  ? ?
?PK OrderDetID  ?  ? ?
?FK OrderID     ???? ?
?FK ProductID   ???? ?
?  Quantity     ?    ?
?  UnitPrice    ?    ?
?  LineTotal    ?    ?
?????????????????    ?
         ?           ?
         ?           ?
?????????????????    ?
?    Orders     ?    ?
?????????????????    ?
?PK OrderID     ???  ?
?  OrderNumber  ? ?  ?
?  CustomerName ? ?  ?
?  CustomerEmail? ?  ?
?  CustomerPhone? ?  ?
?  OrderDate    ? ?  ?
?  Status       ? ?  ?
?  TotalAmount  ? ?  ?
?FK CreatedBy   ??????
????????????????? ?
         ?        ?
         ? FK     ?
         ?        ?
????????????????? ?
?   Payments    ? ?
????????????????? ?
?PK PaymentID   ? ?
?FK OrderID     ???
?  PaymentDate  ?
?  Amount       ?
?  PaymentMethod?
?  RefNumber    ?
?  Status       ?
?  Notes        ?
?????????????????

?????????????????????????
?  InventoryTrans.      ?
?????????????????????????
? PK TransID            ?
? FK ProductID          ????
?    Type               ?  ?
?    Quantity           ?  ? (Tracks all
?    ReferenceNumber    ?  ?  stock movements)
? FK PerformedBy        ????
?    TransDate          ?  ?
?    Notes              ?  ?
?????????????????????????  ?
                           ?
???????????????????        ?
?   Suppliers     ?        ?
???????????????????        ?
? PK SupplierID   ??????????
?    CompanyName  ?
?    ContactName  ?
?    Email        ?
?    Phone        ?
?    Address      ?
?    Status       ?
?    CreatedDate  ?
???????????????????
```

## Data Flow Diagram

```
????????????????????????????????????????????????????????????????????
?                        Data Flow                                 ?
????????????????????????????????????????????????????????????????????

1. USER LOGIN FLOW
   ????????????????
   
   User Input ? UserBLL.Login()
                    ?
             Validate credentials
                    ?
             UserDAL.GetByUsername()
                    ?
             SQL Query: SELECT * FROM Users WHERE Username = @Username
                    ?
             Verify password hash
                    ?
             Return LoginResult


2. PRODUCT SEARCH FLOW
   ???????????????????
   
   Search Term ? ProductBLL.Search()
                      ?
              Validate input
                      ?
              ProductDAL.Search()
                      ?
              SQL Query: SELECT * FROM Products WHERE Name LIKE @Keyword
                      ?
              Join with Categories & Suppliers
                      ?
              Return List<Product>


3. ORDER CREATION FLOW
   ????????????????????
   
   Order Data ? OrderBLL.CreateOrder()
                     ?
              Validate order
                     ?
              BEGIN TRANSACTION
                     ?
              OrderDAL.Insert()  ? Insert into Orders table
                     ?
              OrderDetailDAL.Insert() ? Insert into OrderDetails table
                     ?
              ProductDAL.UpdateStock() ? Update Products.StockLevel
                     ?
              InventoryTransactionDAL.Insert() ? Insert transaction record
                     ?
              COMMIT TRANSACTION
                     ?
              Return success


4. INVENTORY UPDATE FLOW
   ??????????????????????
   
   Stock Change ? InventoryTransactionBLL.RecordTransaction()
                          ?
                   Validate quantity
                          ?
                   BEGIN TRANSACTION
                          ?
                   Insert into InventoryTransactions
                          ?
                   Update Products.StockLevel
                          ?
                   COMMIT TRANSACTION
                          ?
                   Return success
```

## Setup Flow Diagram

```
????????????????????????????????????????????????????????????????????
?                   Setup Process Flow                             ?
????????????????????????????????????????????????????????????????????

START
  ?
  ??? Run complete-setup.ps1
  ?
  ??? Check Docker Installation
  ?   ??? ? Found ? Continue
  ?   ??? ? Not Found ? Error: Install Docker
  ?
  ??? Check Docker Running
  ?   ??? ? Running ? Continue
  ?   ??? ? Not Running ? Error: Start Docker
  ?
  ??? Check Existing Container
  ?   ??? Found ? Ask user: Remove?
  ?   ?   ??? Yes ? Remove & Continue
  ?   ?   ??? No ? Start existing & Exit
  ?   ??? Not Found ? Continue
  ?
  ??? Pull SQL Server Image
  ?   ??? Download ~1.5GB (first time only)
  ?
  ??? Create Container
  ?   ??? docker run ... sqlserver2022
  ?
  ??? Wait 30 seconds
  ?   ??? SQL Server initialization
  ?
  ??? Verify Container Running
  ?   ??? ? Running ? Continue
  ?   ??? ? Failed ? Check logs & Exit
  ?
  ??? Import Database Schema
  ?   ??? Copy AWE_Electronics_Database.sql to container
  ?   ??? Execute SQL script
  ?   ?   ??? Create database
  ?   ?   ??? Create tables
  ?   ?   ??? Create indexes
  ?   ?   ??? Create views
  ?   ?   ??? Create stored procedures
  ?   ?   ??? Insert sample data
  ?   ??? Remove temp script file
  ?
  ??? Test Connection
  ?   ??? Connect to database
  ?   ??? Query statistics
  ?   ??? Display results
  ?
  ??? SUCCESS!
      ??? Display connection info & next steps

Database is now ready for use!
```

## Security Architecture

```
????????????????????????????????????????????????????????????????????
?                   Security Layers                                ?
????????????????????????????????????????????????????????????????????

??????????????????????????????????????????????????????????????
? Application Layer Security                                 ?
??????????????????????????????????????????????????????????????
?  • User Authentication (SHA-256 password hashing)          ?
?  • Role-Based Access Control (Admin/Manager/Staff)         ?
?  • Session Management                                      ?
?  • Input Validation in BLL                                 ?
??????????????????????????????????????????????????????????????
                ?
??????????????????????????????????????????????????????????????
? Data Access Layer Security                                 ?
??????????????????????????????????????????????????????????????
?  • Parameterized Queries (SQL Injection Prevention)        ?
?  • Connection String Encryption                            ?
?  • Command Timeout Settings                                ?
?  • Transaction Management                                  ?
??????????????????????????????????????????????????????????????
                ?
??????????????????????????????????????????????????????????????
? Database Layer Security                                    ?
??????????????????????????????????????????????????????????????
?  • SQL Server Authentication                               ?
?  • TrustServerCertificate for SSL/TLS                      ?
?  • Constraints (Check, Foreign Key)                        ?
?  • Triggers (Data Integrity)                               ?
?  • Views (Data Abstraction)                                ?
??????????????????????????????????????????????????????????????
                ?
??????????????????????????????????????????????????????????????
? Infrastructure Layer Security                              ?
??????????????????????????????????????????????????????????????
?  • Docker Container Isolation                              ?
?  • Port Mapping (localhost only by default)                ?
?  • Container Resource Limits                               ?
?  • SQL Server Built-in Security                            ?
??????????????????????????????????????????????????????????????

??  PRODUCTION RECOMMENDATIONS:
   • Change default SA password
   • Use Windows Authentication
   • Enable SSL/TLS encryption
   • Implement firewall rules
   • Use Azure Key Vault for secrets
   • Enable SQL Server auditing
   • Regular security updates
```

## Backup Strategy Diagram

```
????????????????????????????????????????????????????????????????????
?                   Backup Strategy                                ?
????????????????????????????????????????????????????????????????????

Daily Backups
     ?
     ??? FULL BACKUP
     ?   ??? Every Sunday at 2:00 AM
     ?       ??? Retention: 4 weeks
     ?
     ??? DIFFERENTIAL BACKUP
     ?   ??? Monday-Saturday at 2:00 AM
     ?       ??? Retention: 1 week
     ?
     ??? TRANSACTION LOG BACKUP
         ??? Every hour
             ??? Retention: 24 hours

Backup Location:
   ??? Container: /var/opt/mssql/backup/
   ??? Host Mount: ./backups/ (recommended)
   ??? Cloud Storage: Azure Blob / AWS S3 (production)

Recovery Options:
   ??? Point-in-Time Recovery (within 24 hours)
   ??? Daily Recovery (last 28 days)
   ??? Disaster Recovery (off-site backups)
```

---

**For detailed implementation, see:**
- Database Schema: `AWE_Electronics_Database.sql`
- Connection Config: `DAL/DatabaseConfig.cs`
- Setup Guide: `DATABASE_SETUP.md`
